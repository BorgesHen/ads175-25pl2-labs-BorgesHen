<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:f="http://xmlns.jcp.org/jsf/core"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets">
<h:head>
    <title>Sistema de Biblioteca Digital</title>
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <style>
        body { font-family: Arial, Helvetica, sans-serif; margin: 20px; }
        .card { display:inline-block; padding:12px; margin:8px; border-radius:8px; box-shadow:0 2px 4px rgba(0,0,0,0.1); }
        table { width:100%; border-collapse: collapse; margin-top:10px }
        th, td { border:1px solid #ddd; padding:8px }
        th { background:#f2f2f2 }
    </style>
</h:head>
<h:body>
    <h1>ðŸ“š Sistema de Biblioteca Digital</h1>
    <h3>DemonstraÃ§Ã£o de Relacionamentos JPA</h3>

    <div>
        <div class="card">Total de Livros: <strong>#{bibliotecaBean.totalLivros}</strong></div>
        <div class="card">Livros DisponÃ­veis: <strong>#{bibliotecaBean.livrosDisponiveis}</strong></div>
        <div class="card">EmprÃ©stimos Ativos: <strong>#{bibliotecaBean.emprestimosAtivosCount}</strong></div>
        <div class="card">Total de Autores: <strong>#{bibliotecaBean.totalAutores}</strong></div>
    </div>

    <h2>Autores</h2>
    <h:form>
        <ui:repeat value="#{bibliotecaBean.autores}" var="autor">
            <div style="margin-bottom:6px">
                <strong>#{autor.nome}</strong> â€” #{autor.email} â€” Livros: #{autor.quantidadeLivros}
            </div>
        </ui:repeat>
    </h:form>

    <h2>Livros</h2>
    <h:form>
        <table>
            <thead>
                <tr><th>TÃ­tulo</th><th>Autor</th><th>ISBN</th><th>Status</th></tr>
            </thead>
            <tbody>
                <ui:repeat value="#{bibliotecaBean.livros}" var="livro">
                    <tr>
                        <td>#{livro.titulo}</td>
                        <td>#{livro.autor != null ? livro.autor.nome : 'â€”'}</td>
                        <td>#{livro.isbn}</td>
                        <td>#{livro.disponivel ? 'DisponÃ­vel' : 'Emprestado'}</td>
                    </tr>
                </ui:repeat>
            </tbody>
        </table>
    </h:form>

    <h2>EmprÃ©stimos Ativos</h2>
    <h:form>
        <table>
            <thead>
                <tr><th>UsuÃ¡rio</th><th>Livro</th><th>Data EmprÃ©stimo</th><th>Data Prevista</th></tr>
            </thead>
            <tbody>
                <ui:repeat value="#{bibliotecaBean.emprestimosAtivos}" var="emp">
                    <tr>
                        <td>#{emp.nomeUsuario}</td>
                        <td>#{emp.livro != null ? emp.livro.titulo : 'â€”'}</td>
                        <td>#{emp.dataEmprestimo}</td>
                        <td>#{emp.dataDevolucaoPrevista}</td>
                    </tr>
                </ui:repeat>
            </tbody>
        </table>
    </h:form>

</h:body>
</html>
